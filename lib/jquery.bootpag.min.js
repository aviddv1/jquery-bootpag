/**
 * @preserve
 * bootpag - jQuery plugin for dynamic pagination
 *
 * Copyright (c) 2013 botmonster@7items.com
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://botmonster.com/jquery-bootpag/
 *
 * Version:  1.1 (Howie)
 *
 *
 * If you want to use items per page / total items instead of total pages
 * do not define 'total' in settings, instead define itemsPerPage and totalItems
 *
 * To toggle directional buttons such as First, Prev, Next and Last, set showHideDirections to TRUE
 *
 * To leap from page 1 to the first page of the next set, set 'leap' to TRUE
 *
 * Declare 'on' method first since we want to be listening for first event before it's triggered
 * Declare 'on' method after instantiating bootpag to skip the initial page event
 * or
 * Set 'skipInitPageEvent' to TRUE to skip the initial page event
 *
 */
!function(t){"use strict";t.fn.bootpag=function(a){var e=this,i=!1,s=t.extend({total:0,itemsPerPage:null,totalItems:null,page:1,skipInitPageEvent:!1,maxVisible:null,leaps:!1,href:"javascript:void(0);",hrefVariable:"{{number}}",classPrefix:"bootpag-",activeClass:"",showHideDirections:!0,hidePagerForSinglePage:!0,first:"&laquo;",prev:"&lsaquo;",next:"&rsaquo;",last:"&raquo;",debug:!1},e.data("settings")||{},a||{}),l=function(a,l,r){s.debug&&console.log("render page: "+l);var n,g=0==s.maxVisible?1:s.maxVisible,p=1==s.maxVisible?0:1,d=Math.floor((l-1)/g)*g,f=a.find("li"),c=s.activeClass?s.activeClass:s.classPrefix+"active";s.page=l=0>l?0:l>s.total?s.total:l,f.removeClass("disabled "+c),n=1>l-1?1:s.leaps&&l-1>=s.maxVisible?Math.floor((l-1)/g)*g:l-1,f.parent().find("."+s.classPrefix+"first").toggle(1!==l&&s.showHideDirections||!s.showHideDirections),f.parent().find("."+s.classPrefix+"prev").toggleClass("disabled",1===l).attr("data-lp",n).find("a").attr("href",o(n)).toggle(1!==l&&s.showHideDirections||!s.showHideDirections);var p=1==s.maxVisible?0:1;if(n=l+1>s.total?s.total:s.leaps&&l+1<s.total-s.maxVisible?d+s.maxVisible+p:l+1,s.debug){var u=l+1>s.total,b=s.leaps&&l+1<s.total-s.maxVisible,h=d+s.maxVisible+p,x=l+1;console.log("-----\n\n page + 1 > settings.total: "+u),u&&console.log("settings.total: "+s.total),u||console.log("settings.leaps && page + 1 < settings.total - settings.maxVisible: "+b),b&&console.log("vis + settings.maxVisible + step: "+h),b||console.log("page + 1: "+x),console.log("reassign next lp: "+n)}f.parent().find("."+s.classPrefix+"next").toggleClass("disabled",l===s.total).attr("data-lp",n).find("a").attr("href",o(n)).toggle(l!==s.total&&s.showHideDirections||!s.showHideDirections),f.parent().find("."+s.classPrefix+"last").toggle(l!==s.total&&s.showHideDirections||!s.showHideDirections);var m=f.filter("[data-lp="+l+"]"),v="."+s.classPrefix+"next,."+s.classPrefix+"prev,."+s.classPrefix+"first,."+s.classPrefix+"last";if(!m.not(v).length){var P=d>=l?-s.maxVisible:0;f.not(v).each(function(a){n=a+1+d+P,t(this).attr("data-lp",n).toggle(n<=s.total).find("a").html(n).attr("href",o(n))}),m=f.filter("[data-lp="+l+"]")}if(m.filter("[data-button-type=page]").addClass(c),m.addClass("disabled"),e.data("settings",s),!s.skipInitPageEvent&&!i||i){var V={page:l,button:r?r.data("button-type"):"init"};e.trigger("page",V),s.debug&&console.log("triggering")}i=!0},o=function(t){return s.href.replace(s.hrefVariable,t)};e.init=function(){return s.debug&&console.log("init",s),t.isNumeric(s.itemsPerPage)&&t.isNumeric(s.totalItems)&&(s.total=Math.ceil(s.totalItems/s.itemsPerPage)),s.total<=0?e:(t.isNumeric(s.maxVisible)||s.maxVisible||(s.maxVisible=s.total),e.data("settings",s),void e.each(function(){var a,i,r=t(this),n=['<ul class="pagination bootpag">'];if(r.find("ul.bootpag").remove(),s.hidePagerForSinglePage&&1==s.total)return e;s.first&&n.push('<li data-button-type="first" data-lp="1" class="'+s.classPrefix+'first"><a href="'+o(1)+'">'+s.first+"</a></li>"),s.prev&&n.push('<li data-button-type="prev" data-lp="1" class="'+s.classPrefix+'prev"><a href="'+o(1)+'">'+s.prev+"</a></li>");for(var g=1;g<=Math.min(s.total,s.maxVisible);g++)n.push('<li data-button-type="page" data-lp="'+g+'" class="'+s.classPrefix+"page-"+g+'"><a href="'+o(g)+'">'+g+"</a></li>");s.next&&(i=s.leaps&&s.total>s.maxVisible?Math.min(s.maxVisible+1,s.total):2,s.debug&&console.log("lp: "+i),n.push('<li data-button-type="next" data-lp="'+i+'" class="'+s.classPrefix+'next"><a href="'+o(i)+'">'+s.next+"</a></li>")),s.last&&n.push('<li data-button-type="last" data-lp="'+s.total+'" class="'+s.classPrefix+'last"><a href="'+o(s.total)+'">'+s.last+"</a></li>"),n.push("</ul>"),r.append(n.join("")),a=r.find("ul.bootpag"),r.find("li").click(function(){var e=t(this);if(!e.hasClass("disabled")){var i=parseInt(e.attr("data-lp"),10);l(a,i,e)}}),l(a,s.page,null)}))},e.init()}}(jQuery);
